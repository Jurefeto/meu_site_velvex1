{% extends "base.html" %}

{% block title %}Minha Conta - Velvex{% endblock %}

{% block head_content %}
    <style>
        .card-header[data-bs-toggle="collapse"] { cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .card-header h5 { margin-bottom: 0; }
        .profile-toggle-icon { transition: transform 0.3s ease-in-out; }
        .card-header[aria-expanded="true"] .profile-toggle-icon { transform: rotate(0deg); }
        .card-header[aria-expanded="false"] .profile-toggle-icon { transform: rotate(-90deg); }
        .table-responsive .table { margin-bottom: 0; }
        .card-body.p-0 .table-responsive { border-top: 1px solid #dee2e6; }
        .card-footer { border-top: 1px solid rgba(0,0,0,.125); }
        .favorito-img { width: 60px; height: 60px; object-fit: cover; }
        .scrollable-card-body {
            max-height: 300px;
            overflow-y: auto;
            border-bottom: 1px solid #dee2e6;
        }
    </style>
{% endblock %}

{% block content %}
<h2 class="mb-4">Minha Conta</h2>

<!-- Atalhos para todas as seções -->
<div class="mb-4 d-flex gap-2 flex-wrap">
    <a href="{{ url_for('meus_pedidos') }}#compras" class="btn btn-outline-primary">
        <i class="fas fa-shopping-bag"></i> Ver Minhas Compras
    </a>
    <a href="{{ url_for('meus_pedidos') }}#vendas" class="btn btn-outline-success">
        <i class="fas fa-store"></i> Ver Minhas Vendas
    </a>
    <a href="#card-anuncios" class="btn btn-outline-secondary">
        <i class="fas fa-bullhorn"></i> Ver Meus Anúncios
    </a>
    <a href="#card-favoritos" class="btn btn-outline-danger">
        <i class="fas fa-heart"></i> Ver Meus Favoritos
    </a>
    <a href="#card-ofertas-recebidas" class="btn btn-outline-info">
        <i class="fas fa-hand-holding-usd"></i> Ver Ofertas Recebidas
    </a>
    <a href="#card-ofertas-feitas" class="btn btn-outline-warning">
        <i class="fas fa-gift"></i> Ver Ofertas Feitas
    </a>
    <a href="#card-perfil" class="btn btn-outline-dark">
        <i class="fas fa-user-edit"></i> Editar Perfil
    </a>
</div>

<div class="row">
    <div class="col-12">
        <div class="alert alert-info">
            <h5 class="alert-heading">Bem-vindo à sua área pessoal!</h5>
            <p class="mb-0">Use os botões acima para acessar rapidamente suas compras, vendas, anúncios, favoritos, ofertas e configurações do perfil.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const cepInput = document.getElementById('perfil_cep');
    if (cepInput) {
        cepInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); 
            if (value.length > 5) {
                value = value.substring(0, 5) + '-' + value.substring(5, 8); 
            }
            e.target.value = value.substring(0, 9);
        });
    }
});
</script>
{% endblock %}